<template>
  <svg
      :width="svgWidth"
      :height="svgHeight"
      viewBox="0 0 210 297" version="1.1"
      id="svgMain"
      xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">
    <defs id="defs2">
      <marker
        style="overflow:visible" id="Arrow1L" refX="0" refY="0"
        orient="auto-start-reverse" markerWidth="8.75"
        markerHeight="5" viewBox="0 0 8.75 5" preserveAspectRatio="xMidYMid">
        <path
          style="fill:context-stroke;fill-rule:evenodd;stroke:none"
          d="M 0,0 5,-5 -12.5,0 5,5 Z" id="arrow1L"
          transform="scale(-0.5)" />
      </marker>
      <marker
          style="overflow:visible"
          id="Arrow1L-8" refX="0" refY="0" orient="auto-start-reverse"
          markerWidth="8.75"
          markerHeight="5" viewBox="0 0 8.75 5"
          preserveAspectRatio="xMidYMid">
        <path
          style="fill:context-stroke;fill-rule:evenodd;stroke:none"
          d="M 0,0 5,-5 -12.5,0 5,5 Z" id="arrow1L-3"
          transform="scale(-0.5)" />
      </marker>
    </defs>
    <g id="layer1">
      <path
        style="fill:none;stroke:#5a5a5a;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:0.754386"
        d="M 97.978534,40.977649 V 169.91131" id="path3791" />
      <circle
        style="fill:#87aade;fill-opacity:0.196491;stroke-width:4;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:16, 7.99999, 4, 7.99999"
        id="path764" cx="97.2258" cy="105.03226" r="64" />
      <circle
        style="fill:none;fill-opacity:0.5;stroke:#0083ce;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:0.319298"
        id="circleAround1" cx="97.225807" cy="105.3871" r="70">
      </circle>
      <circle
        style="fill:none;fill-opacity:0.5;stroke:#0083ce;stroke-width:0.88163;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:0.319298"
        id="circleAround2" cx="97.225807" cy="105.3871" r="64">
      </circle>
      <path
        style="fill:none;stroke:#5a5a5a;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:0.729825"
        d="m 33.349068,105.13619 128.302242,0" id="path3791-6" />
      <path
        style="fill:none;stroke:#000000;stroke-width:0.265;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:1.06, 1.06;stroke-dashoffset:0;stroke-opacity:1"
        d="M 98.595731,105.14383 163.32841,81.196481" id="path7617" />
      <g id="g2902" transform="translate(0.59252167,-0.30212402)">
        <circle
          style="fill:#ffd965;fill-opacity:.8;stroke-width:4;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:16, 7.99999, 4, 7.99999"
          id="path550" cx="97.225807" cy="105.3871" r="24.661289">
          <animate attributeName="r" values="25; 30; 35; 30; 25" dur="15s" repeatCount="indefinite" />
        </circle>
        <circle
          style="fill:#ffad13;fill-opacity:1;stroke-width:3.16571;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:12.6629, 6.33141, 3.16571, 6.33141"
          id="circleSun" cx="97.225807" cy="105.3871" r="19.517658" />
      </g>
      <circle
        style="fill:#87aade;fill-opacity:1;stroke:#0083ce;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:0.319298"
        id="earthCircle" cx="176" cy="105" r="6">
        <animateTransform
          attributeName="transform"
          begin="click"
          type="rotate"
          :values="earthValues"
          dur="5s"
          repeatCount="1"
        />
      </circle>
      <circle
        style="fill:#000000;fill-opacity:0.22807;stroke:#0083ce;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:0.642105"
        id="path552-3-5" cx="168.09866" cy="105.03225" r="6" />
      <circle
        style="fill:#000000;fill-opacity:0.2;stroke:#0083ce;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:0.642105"
        id="path552-3" cx="97.964836" cy="34.932556" r="6" />
      <circle
        style="fill:#000000;fill-opacity:0.2;stroke:#0083ce;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:0.642105"
        id="path552-3-7" cx="98.064049" cy="176.28485" r="6" />
      <circle
        style="fill:#000000;fill-opacity:0.2;stroke:#0083ce;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:0.642105"
        id="path552-3-8" cx="27.038719" cy="105.3871" r="6" />
      <path
        style="fill:none;fill-opacity:0.115789;stroke:#c8c8c8;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:0.989474;marker-start:url(#Arrow1L)"
        id="path8397-6" d="M 167.28539,146.13348 A 90,90 0 0 1 134.3431,179.07576" />
      <path
        style="fill:none;fill-opacity:0.115789;stroke:#c8c8c8;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker-start:url(#Arrow1L-8)"
        id="path8397-6-2" d="m -25.252508,-66.399643 a 90,90 0 0 1 -32.94229,32.942289" transform="scale(-1)" />
    </g>
  </svg>
  <div>{{ eclipticLongitude }}</div>
</template>

<script setup>
import { computed } from 'vue';
import * as Sun from '../utils/sun';

const props = defineProps({
  size: { type: [String, Number], required: false, default: null }
});

const defaultSize = 500;

const svgWidth = computed(() => {
  return props.size || defaultSize;
});

const svgHeight = computed(() => {
  return props.size || defaultSize;
});

const julianDate = () => {
  const dt = moment(this.userDate).toDate();
  const res = dt.setHours(this.userHours, this.userMinutes, this.userSeconds);
  const dateWrapper = moment(dt).clone();
  return dateWrapper.toDate();
};


const eclipticLongitude = computed(() => {
  const eclipticLon = Sun.GetEclipticLongitude(new Date());
  return Math.round(eclipticLon * 100) / 100;
});

const earthFrom = computed(() => {
  return `0 97 105`;
});

const earthTo= computed(() => {
  return `${eclipticLongitude.value} 97 105`;
});

const earthValues= computed(() => {
  return `0 97 105; ${eclipticLongitude.value} 97 105; 360 97 105`;
});



</script>